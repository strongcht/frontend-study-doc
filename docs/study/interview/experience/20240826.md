

---
layout: doc
---

## 2024 å¹´ 8 æœˆ 26 æ—¥
> ä»Šå¤©æ™šä¸Š7:00å‚åŠ ç™¾åº¦å¯¼èˆªå®¢æˆ·ç«¯ç»„-å¯¼èˆªç§»åŠ¨ç«¯å¼€å‘å·¥ç¨‹å¸ˆ ä¸“ä¸šä¸€é¢ï¼š(æœªé€šè¿‡)

## é¢è¯•é—®é¢˜ï¼š
1.è‡ªæˆ‘ä»‹ç»
2.es6æ–°å¢äº†å“ªäº›ç‰¹æ€§ï¼Ÿ
set ä¸arrayçš„åŒºåˆ«ï¼›
promise èƒ½ä¸èƒ½è¢«try catchæ•è·ï¼›
promiseå·¥ä½œæµç¨‹ï¼›
ESMä¸CommonJSæ¨¡å—æœ‰ä»€ä¹ˆå¼‚åŒï¼Ÿ
es6-> es5ï¼› babelå¦‚ä½•è½¬æ¢ï¼Ÿes6å’Œes5çš„astæ˜¯ä¸€æ ·çš„å—ï¼Ÿè¿è¡Œè½¬æ¢ä¸ºes6;
4.vue2å’Œvue3çš„ä¸åŒï¼Ÿ
5.vite å¼€å‘æ¨¡å¼ä¸ºä»€ä¹ˆå¿«ï¼ŸhotåŸç†--å¦‚ä½•ç¼“å­˜ï¼ˆæµè§ˆå™¨ç¼“å­˜ï¼‰ï¼ˆwebpackå¦‚ä½•åšçƒ­æ›´æ–°ï¼‰ viteå¦‚ä½•æ ‡è¯†å‡ºæ›´æ–°
6.æµè§ˆå™¨ç¼“å­˜ -å¯å‘å¼ç¼“å­˜
7.æ€§èƒ½ä¼˜åŒ–éƒ½åšäº†å•¥ï¼Ÿä¸ºä»€ä¹ˆå›¾ç‰‡è½¬base64
8.rem em pxçš„åŒºåˆ« é€‚é…ç§»åŠ¨ç«¯ @media vw % flex rem
postcss å¦‚ä½•åšpx->rem
å¦‚ä½•ç¡®å®šæ ¹å…ƒç´ çš„fontSizeå¤§å°

## æ‰‹å†™ç®—æ³•
ç²˜æ€§äº‹ä»¶çš„EventBus

## åé—®ï¼š
1.ä¸šåŠ¡
2.æŠ€æœ¯æ ˆ


## çŸ¥è¯†ç‚¹æ€»ç»“

1.ES6æ–°å¢å“ªäº›ï¼Ÿ
+ let const
+ ç®­å¤´å‡½æ•° `() => {}`
+ Class ç±»
+ è§£æ„ å±•å¼€ é»˜è®¤å‚æ•°
+ Map Set WeakMap WeakSet
+ Proxy ä¸èƒ½è¢«babelè½¬åŒ– æ‰€ä»¥vue3 éœ€è¦æ”¯æŒes2015çš„æµè§ˆå™¨
+ Symbol
+ Promise
+ Generator Iterator
+ Number Array Math String Object æ–°å¢çš„API
+ Reflect API
+ ESM æ¨¡å—

2.babelåŸç†
Babel æ˜¯ä¸€ä¸ªå¹¿æ³›ä½¿ç”¨çš„ JavaScript ç¼–è¯‘å™¨ï¼Œå®ƒçš„ä¸»è¦åŠŸèƒ½æ˜¯å°†ç°ä»£ JavaScript ä»£ç ï¼ˆES6+ ç­‰æ–°æ ‡å‡†ï¼‰è½¬æ¢ä¸ºå‘åå…¼å®¹çš„æ—§ç‰ˆæœ¬ JavaScriptï¼Œä½¿å…¶èƒ½å¤Ÿåœ¨ä¸æ”¯æŒæ–°æ ‡å‡†çš„æ—§ç¯å¢ƒä¸­è¿è¡Œã€‚

+ Babel çš„åŸç†
Babel çš„å·¥ä½œåŸç†å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªä¸»è¦æ­¥éª¤ï¼š**è§£æï¼ˆParsingï¼‰**ã€**è½¬æ¢ï¼ˆTransformationï¼‰**ã€å’Œ**ç”Ÿæˆï¼ˆGenerationï¼‰**ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸å¤§å¤šæ•°ç¼–è¯‘å™¨çš„å·¥ä½œåŸç†ç±»ä¼¼ã€‚

 1. **è§£æï¼ˆParsingï¼‰**
è§£æé˜¶æ®µå°†æºç ï¼ˆå³å¼€å‘è€…ç¼–å†™çš„ JavaScript ä»£ç ï¼‰è½¬æ¢æˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼ŒAbstract Syntax Treeï¼‰ã€‚è¿™ä¸€é˜¶æ®µå¯ä»¥è¿›ä¸€æ­¥åˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š

- **è¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰**ï¼šå°†ä»£ç å­—ç¬¦ä¸²åˆ†è§£æˆä¸€ç³»åˆ—çš„æ ‡è®°ï¼ˆTokensï¼‰ï¼Œè¿™äº›æ ‡è®°ä»£è¡¨ä»£ç çš„åŸºæœ¬ç»„æˆå•å…ƒï¼Œå¦‚å…³é”®å­—ã€å˜é‡ã€è¿ç®—ç¬¦ç­‰ã€‚
- **è¯­æ³•åˆ†æï¼ˆSyntax Analysisï¼‰**ï¼šé€šè¿‡æ ‡è®°ç”ŸæˆæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ï¼ŒAST æ˜¯ä»£ç çš„ç»“æ„åŒ–è¡¨ç¤ºå½¢å¼ï¼Œä»¥æ ‘çŠ¶ç»“æ„å±•ç¤ºä»£ç ä¸­çš„å„ä¸ªç»„æˆéƒ¨åˆ†åŠå®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚

 2. **è½¬æ¢ï¼ˆTransformationï¼‰**
åœ¨è¿™ä¸ªé˜¶æ®µï¼ŒBabel ä¼šå¯¹ç”Ÿæˆçš„ AST è¿›è¡Œæ“ä½œã€‚æ ¹æ®é…ç½®çš„æ’ä»¶æˆ–é¢„è®¾ï¼ŒBabel å¯ä»¥å°† AST è¿›è¡Œç›¸åº”çš„è½¬æ¢ã€‚ä¾‹å¦‚ï¼š
- å°† ES6+ çš„ç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šçš„å‡½æ•°å£°æ˜ï¼›
- å°†ç±»ï¼ˆclassï¼‰è¯­æ³•è½¬æ¢ä¸ºåŸºäºåŸå‹çš„å‡½æ•°æ„é€ ï¼›
- å°† `async/await` è¯­æ³•è½¬æ¢ä¸ºåŸºäº Promise çš„ä»£ç ã€‚

åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼ŒBabel æ’ä»¶ä¼šæ ¹æ®ç‰¹å®šçš„è§„åˆ™å’Œé…ç½®å¯¹ AST è¿›è¡Œéå†å’Œä¿®æ”¹ã€‚æ’ä»¶çš„è®¾è®¡ç›®æ ‡å°±æ˜¯åœ¨ AST å±‚é¢å¤„ç†ä»£ç çš„è½¬æ¢é€»è¾‘ã€‚

 3. **ç”Ÿæˆï¼ˆGenerationï¼‰**
è½¬æ¢åçš„ AST æœ€ç»ˆä¼šè¢«è½¬æ¢å› JavaScript ä»£ç ã€‚åœ¨ç”Ÿæˆé˜¶æ®µï¼ŒBabel ä¼šå°†ä¿®æ”¹åçš„ AST è½¬æ¢å›ä»£ç å­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä¿æŒä»£ç çš„æ ¼å¼ï¼ˆå¦‚ç¼©è¿›ã€æ¢è¡Œç­‰ï¼‰ï¼Œä»¥ç¡®ä¿ä»£ç çš„å¯è¯»æ€§å’Œæ­£ç¡®æ€§ã€‚

+ Babel çš„æ’ä»¶ä½“ç³»
Babel çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒçš„æ’ä»¶ç³»ç»Ÿã€‚Babel æœ¬èº«åªæ˜¯ä¸€ä¸ªä»£ç ç¼–è¯‘æ¡†æ¶ï¼Œå®é™…çš„è½¬æ¢å·¥ä½œç”±æ’ä»¶å®Œæˆã€‚æ¯ä¸ªæ’ä»¶éƒ½ä¼šå¤„ç†ç‰¹å®šçš„è¯­æ³•è½¬æ¢ä»»åŠ¡ã€‚

- **é¢„è®¾ï¼ˆPresetsï¼‰**ï¼šBabel é¢„è®¾æ˜¯æ’ä»¶çš„é›†åˆï¼Œé€šå¸¸ç”¨äºå¿«é€Ÿé…ç½®é¡¹ç›®ã€‚ä¾‹å¦‚ï¼Œ`@babel/preset-env` æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„é¢„è®¾ï¼Œèƒ½å¤Ÿæ ¹æ®ç›®æ ‡ç¯å¢ƒï¼ˆå¦‚æµè§ˆå™¨ç‰ˆæœ¬ã€Node.js ç‰ˆæœ¬ç­‰ï¼‰è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ’ä»¶æ¥è½¬æ¢ä»£ç ã€‚
- **æ’ä»¶ï¼ˆPluginsï¼‰**ï¼šæ¯ä¸ªæ’ä»¶åªå¤„ç†ä¸€é¡¹ç‰¹å®šçš„è½¬æ¢ä»»åŠ¡ã€‚ä¾‹å¦‚ï¼Œ`@babel/plugin-transform-arrow-functions` ä¸“é—¨ç”¨äºå°†ç®­å¤´å‡½æ•°è½¬æ¢ä¸ºæ™®é€šå‡½æ•°ã€‚

+ Babel çš„å·¥ä½œæµç¨‹
1. **è¯»å–é…ç½®**ï¼šBabel æ ¹æ® `.babelrc`ã€`babel.config.js` æˆ– `package.json` ä¸­çš„é…ç½®ï¼Œç¡®å®šè¦ä½¿ç”¨çš„é¢„è®¾å’Œæ’ä»¶ã€‚
2. **è§£æä»£ç **ï¼šBabel ä¼šå°†æºä»£ç è§£æä¸º ASTã€‚
3. **æ’ä»¶è¿è¡Œ**ï¼šBabel ä½¿ç”¨æ’ä»¶å¯¹ AST è¿›è¡Œéå†å’Œè½¬æ¢ï¼Œåº”ç”¨å¿…è¦çš„ä»£ç å˜æ›´ã€‚
4. **ç”Ÿæˆä»£ç **ï¼šç»è¿‡è½¬æ¢åçš„ AST ä¼šè¢«é‡æ–°ç”Ÿæˆæ–°çš„ JavaScript ä»£ç ã€‚
5. **è¾“å‡º**ï¼šBabel è¾“å‡ºæœ€ç»ˆçš„ JavaScript ä»£ç ï¼Œé€šå¸¸æ˜¯å‘åå…¼å®¹çš„ ES5 ä»£ç ã€‚

+ Babel çš„åº•å±‚å®ç°
Babel ä½¿ç”¨äº†å¾ˆå¤šå¼€æºåº“æ¥å®ç°è¿™äº›æ ¸å¿ƒåŠŸèƒ½ï¼š
- **`@babel/parser`**ï¼šç”¨äºå°†æºç è½¬æ¢ä¸º ASTã€‚å®ƒåŸºäº Acornï¼ˆJavaScript è§£æå™¨ï¼‰è¿›è¡Œäº†æ‰©å±•ï¼Œæ”¯æŒæœ€æ–°çš„ JavaScript è¯­æ³•ã€‚
- **`@babel/traverse`**ï¼šç”¨äºéå†å’Œæ“ä½œ ASTã€‚Babel æ’ä»¶é€šè¿‡è¿™ä¸ªåº“æ¥è®¿é—®å’Œä¿®æ”¹ AST èŠ‚ç‚¹ã€‚
- **`@babel/generator`**ï¼šç”¨äºå°†è½¬æ¢åçš„ AST ç”Ÿæˆæ–°çš„ä»£ç å­—ç¬¦ä¸²ã€‚

+ Babel çš„é«˜çº§åŠŸèƒ½
- **Polyfill**ï¼šBabel å¯ä»¥ä½¿ç”¨ `@babel/polyfill` æˆ– `core-js` æ¥è‡ªåŠ¨æ·»åŠ ä¸€äº› JavaScript æ–°ç‰¹æ€§ï¼ˆå¦‚ `Promise`ã€`Map` ç­‰ï¼‰åœ¨æ—§æµè§ˆå™¨ç¯å¢ƒä¸‹çš„æ”¯æŒã€‚
- **æŒ‰éœ€è½¬æ¢**ï¼šé€šè¿‡ `@babel/preset-env`ï¼ŒBabel å¯ä»¥æ ¹æ®ç›®æ ‡ç¯å¢ƒæ™ºèƒ½é€‰æ‹©è½¬æ¢å“ªäº›è¯­æ³•ç‰¹æ€§ã€‚ä¾‹å¦‚ï¼Œåªåœ¨å¿…è¦æ—¶è½¬æ¢ç®­å¤´å‡½æ•°ï¼Œè€Œä¸å»å¤„ç†å·²ç»æ”¯æŒçš„è¯­æ³•ã€‚
- **ä»£ç åˆ†å‰²å’ŒåŠ¨æ€å¯¼å…¥**ï¼šç»“åˆæ‰“åŒ…å·¥å…·ï¼ˆå¦‚ Webpackï¼‰ï¼ŒBabel ä¹Ÿæ”¯æŒå¤„ç†ä»£ç åˆ†å‰²å’ŒåŠ¨æ€å¯¼å…¥ç­‰é«˜çº§ç‰¹æ€§ã€‚

+ Babel çš„åº”ç”¨åœºæ™¯
- **æ–°æ—§æµè§ˆå™¨å…¼å®¹æ€§**ï¼šBabel å¯ä»¥å¸®åŠ©å¼€å‘è€…ä½¿ç”¨ç°ä»£ JavaScript ç‰¹æ€§ï¼Œè€Œä¸å¿…æ‹…å¿ƒæ—§æµè§ˆå™¨ä¸å…¼å®¹çš„é—®é¢˜ã€‚
- **æ–°è¯­è¨€ç‰¹æ€§å®éªŒ**ï¼šé€šè¿‡ Babel æ’ä»¶ï¼Œå¼€å‘è€…å¯ä»¥ä½¿ç”¨ JavaScript ææ¡ˆä¸­çš„æ–°è¯­æ³•ï¼ˆå¦‚ ES6ã€ES7+ï¼‰ï¼Œå³ä½¿è¿™äº›è¯­æ³•å°šæœªå®Œå…¨è¢«æµè§ˆå™¨æ”¯æŒã€‚
- **è·¨å¹³å°æ”¯æŒ**ï¼šBabel è¿˜å¯ç”¨äºå°†ä»£ç è½¬æ¢ä¸ºå…¶ä»–å¹³å°çš„è¯­è¨€ï¼Œå¦‚é€šè¿‡ `@babel/preset-react` è½¬æ¢ JSX è¯­æ³•ï¼Œæˆ–é€šè¿‡ `@babel/preset-typescript` æ”¯æŒ TypeScriptã€‚


3.vite hot å’Œwebpack hot

+ vite:
> Vite æ—¨åœ¨åˆ©ç”¨ æµè§ˆå™¨å¼€å§‹åŸç”Ÿæ”¯æŒ ES æ¨¡å—

æœåŠ¡å™¨å¯åŠ¨:
Vite é€šè¿‡åœ¨ä¸€å¼€å§‹å°†åº”ç”¨ä¸­çš„æ¨¡å—åŒºåˆ†ä¸º ä¾èµ– å’Œ æºç  ä¸¤ç±»ï¼Œæ”¹è¿›äº†å¼€å‘æœåŠ¡å™¨å¯åŠ¨æ—¶é—´ã€‚

ä¾èµ– å¤§å¤šä¸ºåœ¨å¼€å‘æ—¶ä¸ä¼šå˜åŠ¨çš„çº¯ JavaScriptã€‚ä¸€äº›è¾ƒå¤§çš„ä¾èµ–ï¼ˆä¾‹å¦‚æœ‰ä¸Šç™¾ä¸ªæ¨¡å—çš„ç»„ä»¶åº“ï¼‰å¤„ç†çš„ä»£ä»·ä¹Ÿå¾ˆé«˜ã€‚ä¾èµ–ä¹Ÿé€šå¸¸ä¼šå­˜åœ¨å¤šç§æ¨¡å—åŒ–æ ¼å¼ï¼ˆä¾‹å¦‚ ESM æˆ–è€… CommonJSï¼‰ã€‚
Vite å°†ä¼šä½¿ç”¨ esbuild é¢„æ„å»ºä¾èµ–ã€‚esbuild ä½¿ç”¨ Go ç¼–å†™ï¼Œå¹¶ä¸”æ¯”ä»¥ JavaScript ç¼–å†™çš„æ‰“åŒ…å™¨é¢„æ„å»ºä¾èµ–å¿« 10-100 å€ã€‚

æºç  é€šå¸¸åŒ…å«ä¸€äº›å¹¶éç›´æ¥æ˜¯ JavaScript çš„æ–‡ä»¶ï¼Œéœ€è¦è½¬æ¢ï¼ˆä¾‹å¦‚ JSXï¼ŒCSS æˆ–è€… Vue/Svelte ç»„ä»¶ï¼‰ï¼Œæ—¶å¸¸ä¼šè¢«ç¼–è¾‘ã€‚åŒæ—¶ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„æºç éƒ½éœ€è¦åŒæ—¶è¢«åŠ è½½ï¼ˆä¾‹å¦‚åŸºäºè·¯ç”±æ‹†åˆ†çš„ä»£ç æ¨¡å—ï¼‰ã€‚
Vite ä»¥ åŸç”Ÿ ESM æ–¹å¼æä¾›æºç ã€‚è¿™å®é™…ä¸Šæ˜¯è®©æµè§ˆå™¨æ¥ç®¡äº†æ‰“åŒ…ç¨‹åºçš„éƒ¨åˆ†å·¥ä½œï¼šVite åªéœ€è¦åœ¨æµè§ˆå™¨è¯·æ±‚æºç æ—¶è¿›è¡Œè½¬æ¢å¹¶æŒ‰éœ€æä¾›æºç ã€‚æ ¹æ®æƒ…æ™¯åŠ¨æ€å¯¼å…¥ä»£ç ï¼Œå³åªåœ¨å½“å‰å±å¹•ä¸Šå®é™…ä½¿ç”¨æ—¶æ‰ä¼šè¢«å¤„ç†ã€‚
hot:
åœ¨ Vite ä¸­ï¼ŒHMR æ˜¯åœ¨åŸç”Ÿ ESM ä¸Šæ‰§è¡Œçš„ã€‚å½“ç¼–è¾‘ä¸€ä¸ªæ–‡ä»¶æ—¶ï¼ŒVite åªéœ€è¦ç²¾ç¡®åœ°ä½¿å·²ç¼–è¾‘çš„æ¨¡å—ä¸å…¶æœ€è¿‘çš„ HMR è¾¹ç•Œä¹‹é—´çš„é“¾å¤±æ´»ï¼ˆå¤§å¤šæ•°æ—¶å€™åªæ˜¯æ¨¡å—æœ¬èº«ï¼‰ï¼Œä½¿å¾—æ— è®ºåº”ç”¨å¤§å°å¦‚ä½•ï¼ŒHMR å§‹ç»ˆèƒ½ä¿æŒå¿«é€Ÿæ›´æ–°ã€‚

Vite åŒæ—¶åˆ©ç”¨ HTTP å¤´æ¥åŠ é€Ÿæ•´ä¸ªé¡µé¢çš„é‡æ–°åŠ è½½ï¼ˆå†æ¬¡è®©æµè§ˆå™¨ä¸ºæˆ‘ä»¬åšæ›´å¤šäº‹æƒ…ï¼‰ï¼šæºç æ¨¡å—çš„è¯·æ±‚ä¼šæ ¹æ® 304 Not Modified è¿›è¡Œåå•†ç¼“å­˜ï¼Œè€Œä¾èµ–æ¨¡å—è¯·æ±‚åˆ™ä¼šé€šè¿‡ Cache-Control: max-age=31536000,immutable è¿›è¡Œå¼ºç¼“å­˜ï¼Œå› æ­¤ä¸€æ—¦è¢«ç¼“å­˜å®ƒä»¬å°†ä¸éœ€è¦å†æ¬¡è¯·æ±‚ã€‚

+ webpack:

æœåŠ¡å™¨å¯åŠ¨:
åŸºäºå…¥å£æ–‡ä»¶å¯¹é¡¹ç›®è¿›è¡Œé¢„ç¼–è¯‘ åˆ†ææ¨¡å—çš„ä¾èµ–å…³ç³»æ„å»ºä¾èµ–å›¾
hot:
Webpack çš„ HMR å·¥ä½œåŸç†
æ¨¡å—ä¾èµ–å…³ç³»
Webpack åœ¨ç¼–è¯‘æ—¶ä¼šåˆ†ææ¨¡å—ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œç”Ÿæˆæ¨¡å—æ˜ å°„è¡¨å’Œä¾èµ–å›¾ã€‚è¿™ä½¿å¾—å®ƒèƒ½å¤Ÿåœ¨æ¨¡å—å‘ç”Ÿå˜åŒ–æ—¶ï¼ŒçŸ¥é“å“ªäº›æ¨¡å—ä¾èµ–äºå‘ç”Ÿå˜åŒ–çš„æ¨¡å—ï¼Œå¹¶å‡†ç¡®åœ°åªæ›¿æ¢é‚£äº›å—åˆ°å½±å“çš„æ¨¡å—ã€‚

WebSocket è¿æ¥
å’Œ Vite ä¸€æ ·ï¼ŒWebpack çš„ HMR ä¹Ÿä½¿ç”¨ WebSocketã€‚Webpack Dev Server æˆ–è€… webpack-hot-middleware è´Ÿè´£åœ¨åå°é€šè¿‡ WebSocket å‘æµè§ˆå™¨é€šçŸ¥æ–‡ä»¶çš„å˜åŒ–ã€‚

HMR æ›´æ–°æµç¨‹
Webpack åœ¨æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–æ—¶ï¼Œä¼šé‡æ–°ç¼–è¯‘å—å½±å“çš„æ¨¡å—ã€‚é€šè¿‡ WebSocketï¼Œå°†æ¨¡å—æ›´æ–°çš„ hash å€¼å‘é€ç»™æµè§ˆå™¨ã€‚æµè§ˆå™¨ä½¿ç”¨ Webpack HMR runtime æ¥ç¡®è®¤å…·ä½“éœ€è¦æ›´æ–°çš„æ¨¡å—ï¼Œå¹¶åªè¯·æ±‚è¿™äº›æ¨¡å—çš„æ•°æ®ã€‚

æ¨¡å—æ›¿æ¢ä¸çŠ¶æ€ä¿ç•™
Webpack ä½¿ç”¨ HMR runtime åœ¨å®¢æˆ·ç«¯è´Ÿè´£æ›´æ–°é€»è¾‘ã€‚å½“æ¥æ”¶åˆ°æ–°çš„æ¨¡å—ä»£ç åï¼Œå®ƒä¼šå°è¯•ç”¨æ–°çš„ä»£ç æ›¿æ¢æ—§çš„æ¨¡å—ï¼Œå¹¶ä¿æŒæ¨¡å—çš„å±€éƒ¨çŠ¶æ€ä¸å˜ï¼ˆä¾‹å¦‚ï¼ŒReact ç»„ä»¶çš„çŠ¶æ€ï¼‰ã€‚

4.ESMå’ŒCommonJS
+ ESM å®ƒçš„æ¨¡å—è§£ææ˜¯å‘ç”Ÿåœ¨ **ç¼–è¯‘é˜¶æ®µ**ã€‚CommonJSï¼Œå®ƒçš„æ¨¡å—è§£æå‘ç”Ÿåœ¨ **æ‰§è¡Œé˜¶æ®µ**;
> å› ä¸º require å’Œ module æœ¬è´¨ä¸Šå°±æ˜¯ä¸ªå‡½æ•°æˆ–è€…å¯¹è±¡ï¼Œåªæœ‰åœ¨ æ‰§è¡Œé˜¶æ®µ è¿è¡Œæ—¶ï¼Œè¿™äº›å‡½æ•°æˆ–è€…å¯¹è±¡æ‰ä¼šè¢«å®ä¾‹åŒ–ã€‚å› æ­¤è¢«ç§°ä¸º è¿è¡Œæ—¶åŠ è½½ã€‚

+ CommonJSç”¨åŒæ­¥çš„æ–¹å¼åŠ è½½æ¨¡å—ã€‚ESMæ˜¯å¼‚æ­¥çš„åŸºäºpromiseã€‚
+ CommonJS æ¨¡å—è¾“å‡ºçš„æ˜¯ä¸€ä¸ªå€¼çš„æ‹·è´ï¼ŒES6 æ¨¡å—è¾“å‡ºçš„æ˜¯å€¼çš„å¼•ç”¨ã€‚ 
```js
// a.js 

export let value = 26;
export let obj = {
    a: '1',
    b: {
        c: 2
    }
}

setTimeout(() => {
    value = 30;
}, 3000)

// b.js

import {value, obj} from './a.js';

+ value å’Œ objæ˜¯å€¼çš„å¼•ç”¨ï¼Œå³valueå’Œobjä¼šå—åˆ°å¯¼å‡ºçš„å½±å“
+ valueå’Œ objæ˜¯åªè¯»çš„ åœ¨b.jsä¸èƒ½ä¿®æ”¹ä¸¤è€…çš„å€¼ ä½†å¯¹äºobj.b.c çš„ä¿®æ”¹æ˜¯å¯ä»¥ä¿®æ”¹çš„
```
+ ESMç¼–è¯‘æ—¶ tree shanking, CommonJS åªèƒ½è¿è¡Œæ—¶ä¼˜åŒ–


5.ä¸ºä»€ä¹ˆå›¾ç‰‡è½¬base64
+ å‡å°‘ HTTP è¯·æ±‚æ•°é‡
+ å‡å°‘èµ„æºè¯·æ±‚å»¶è¿Ÿ 
+ å¯ä»¥å’Œç½‘é¡µçš„å…¶ä»–èµ„æºä¸€èµ·åŠ è½½ï¼Œæ— éœ€å•ç‹¬ç­‰å¾…å›¾ç‰‡çš„åŠ è½½å®Œæˆï¼Œè¿™æ ·å¯ä»¥åœ¨é¡µé¢åˆæ¬¡æ¸²æŸ“æ—¶æ›´æ—©æ˜¾ç¤ºå‡ºå›¾ç‰‡ï¼Œæ”¹å–„ç”¨æˆ·ä½“éªŒã€‚

6.promise çš„é”™è¯¯å¯ä»¥è¢«try catchæ•è·å—ï¼Ÿ

ä¸èƒ½è¢«æ•è· [å‚è€ƒåœ°å€](https://blog.csdn.net/harmsworth2016/article/details/125471841)
async  await ä¸­çš„å¯ä»¥

[promise å’Œ async awaitçš„åŒºåˆ«](https://blog.csdn.net/harmsworth2016/article/details/125419725?spm=1001.2014.3001.5501)
```js
const test = function() {
    try {
    let p = new Promise((reslove, reject) => {
      console.log('start');
      throw new Error('error');
      reslove('start');
    });
    p.catch((err) => {
      console.log(err); // ä¼šæ‰§è¡Œ
    });
  } catch (error) {
    // ä¸ä¼šæ‰§è¡Œ
    console.log('catch', error);
  }
}
test();
```


> ç²˜æ€§äº‹ä»¶çš„ EventBus æ˜¯ä¸€ç§å…è®¸äº‹ä»¶å‘å¸ƒåï¼Œæ–°çš„è®¢é˜…è€…è¿˜èƒ½æ¥æ”¶åˆ°ä¹‹å‰å·²ç»å‘å¸ƒè¿‡çš„äº‹ä»¶çš„æœºåˆ¶ã€‚
```js
class EventBus {
    constructor() {
        this.events = {};
        this.stickyEvents = {};
    }

    on(name, callback) {
        if(this.events[name] == undefined) {
            this.events[name] = [];
        }

        this.events[name].push(callback);

        // å¦‚æœæ˜¯ç²˜æ€§äº‹ä»¶ï¼Œè®¢é˜…æ—¶ç«‹å³æ‰§è¡Œå›è°ƒ
        if(this.stickyEvents[name] != undefined) {
            callback(this.stickyEvents[name])
        }
    }

    emit(name, data) {
        if(this.events[name]) {
            this.events[name].forEach(callback => callback(data))
        }
    }

    emitsSticky(name, data) {
        this.stickyEvents[name] = data;

        // åŒæ—¶è§¦å‘äº‹ä»¶çš„è®¢é˜…å›è°ƒ
        this.emit(name, data)
    }

    off(name, callback) {
        if(!this.events[name]) return;
        if(callback == undefined) {
            this.events[name] = [];
        } else {
            this.events[name] = this.events[name].filter(cb => cb !== callback);
        }
    }
    // æ¸…é™¤æ‰€æœ‰è®¢é˜…å’Œç²˜æ€§äº‹ä»¶
    clear() {
        this.events = {};
        this.stickyEvents = {};
    }
}

```

## é¢è¯•å‡†å¤‡æ‰¾çš„å¸¸è€ƒçš„ç®—æ³•é¢˜ï¼š
#### 1.ä¸é‡å¤æœ€å¤§å­ä¸²
```js
function lengthOfLongestSubstring(s) {
    // æ»‘åŠ¨çª—å£
    let res = '', r = 0, max = -1;
    const set = new Set();
    const len = s.length;
    for(let i = 0; i < len; i++) {
        if(i !== 0) {
            set.delete(s[i - 1]);
        }
        while(!set.has(s[r]) && r < len) {
            set.add(s[r]);
            r++;
        }

        if(r - i > max) {
            max = r - i;
            res = s.substr(i, max)
        }
    }
    return res;
}

console.log(lengthOfLongestSubstring("abcabcbb"));
```
#### 2.åƒåˆ†ä½
```js
function formatThousandth(number) {
    let isNeg = false;
    let isDeci = false;

    if(number < 0) {
        isNeg = true;
        number = Math.abs(number)
    }
    number = String(number);
    if(number.indexOf('.') > -1) {
        isDeci = true;
    }

    const [intPart, deciPart] = number.split('.');
    let intArr = [...intPart];
    let len = intArr.length;
    let flag = 1;

    for(let i = len - 1; i >= 0; i--) {
        if(i != 0 && flag % 3 == 0) {
            intArr.splice(i, 0, ',');
        }
        flag++;
    }

    if(isDeci) {
        intArr.push('.');
        intArr.push(deciPart);
    }
    return (isNeg ? '-' : '') + intArr.join('')
};

console.log(formatThousandth('1234567.456789'))
```
#### 3.æœ€å¤§å­æ•°ç»„å’Œ
```js
function maxSubArray(arr) {
    let max = arr[0], pre = arr[0];
    for(let i = 1; i < arr.length; i++) {
        const cur = arr[i];
        pre = Math.max(pre + cur, cur);
        max = Math.max(max, pre);
    }
    return max;
};

console.log(maxSubArray([-2,1,-3,4,-1,2,1,-5,4]));
```
#### 4.å¿«æ’
> ã€Œ**å¿«é€Ÿæ’åºquick sort**ã€æ˜¯ä¸€ç§åŸºäºåˆ†æ²»ç­–ç•¥çš„æ’åºç®—æ³•ï¼Œè¿è¡Œé«˜æ•ˆï¼Œåº”ç”¨å¹¿æ³›ã€‚
å¿«é€Ÿæ’åºçš„æ ¸å¿ƒæ“ä½œæ˜¯â€œå“¨å…µåˆ’åˆ†â€ï¼Œå…¶ç›®æ ‡æ˜¯ï¼šé€‰æ‹©æ•°ç»„ä¸­çš„æŸä¸ªå…ƒç´ ä½œä¸ºâ€œåŸºå‡†æ•°â€ï¼Œå°†æ‰€æœ‰å°äºåŸºå‡†æ•°çš„å…ƒç´ ç§»åˆ°å…¶å·¦ä¾§ï¼Œè€Œå¤§äºåŸºå‡†æ•°çš„å…ƒç´ ç§»åˆ°å…¶å³ä¾§ã€‚

å“¨å…µåˆ’åˆ†çš„æµç¨‹å¦‚ä¸‹:
1. é€‰å–æ•°ç»„æœ€å·¦ç«¯å…ƒç´ ä½œä¸ºåŸºå‡†æ•°ï¼Œåˆå§‹åŒ–ä¸¤ä¸ªæŒ‡é’ˆi å’Œj åˆ†åˆ«æŒ‡å‘æ•°ç»„çš„ä¸¤ç«¯ã€‚
2. è®¾ç½®ä¸€ä¸ªå¾ªç¯ï¼Œåœ¨æ¯è½®ä¸­ä½¿ç”¨iï¼ˆjï¼‰åˆ†åˆ«å¯»æ‰¾ç¬¬ä¸€ä¸ªæ¯”åŸºå‡†æ•°å¤§ï¼ˆå°ï¼‰çš„å…ƒç´ ï¼Œç„¶åäº¤æ¢è¿™ä¸¤ä¸ªå…ƒç´ ã€‚
3. å¾ªç¯æ‰§è¡Œæ­¥éª¤2. ï¼Œç›´åˆ°i å’Œj ç›¸é‡æ—¶åœæ­¢ï¼Œæœ€åå°†åŸºå‡†æ•°äº¤æ¢è‡³ä¸¤ä¸ªå­æ•°ç»„çš„åˆ†ç•Œçº¿ã€‚

**ç®—æ³•ç‰¹æ€§**

+ æ—¶é—´å¤æ‚åº¦ğ‘‚(ğ‘› log ğ‘›)ã€è‡ªé€‚åº”æ’åº
+ ç©ºé—´å¤æ‚åº¦ğ‘‚(ğ‘›)ã€åŸåœ°æ’åº
+ éç¨³å®šæ’åºï¼šåœ¨å“¨å…µåˆ’åˆ†çš„æœ€åä¸€æ­¥ï¼ŒåŸºå‡†æ•°å¯èƒ½ä¼šè¢«äº¤æ¢è‡³ç›¸ç­‰å…ƒç´ çš„å³ä¾§ã€‚
```js
function quickSort(arr) {
    if(arr.length <= 1) return arr;
    const pivotIndex = Math.floor(arr.length / 2);
    const [pivot] = arr.splice(pivotIndex, 1);
    const left = [];
    const right = [];

    for(let i = 0; i < arr.length; i++) {
        if(arr[i] < pivot) {
            left.push(arr[i])
        } else {
            right.push(arr[i])
        }
    }

    return quickSort(left).concat([pivot], quickSort(right));
}

function swap(nums, i , j) {
    const temp = nums[i];
    nums[i] = nums[j];
    nums[j] = temp;
}

function divide(nums, l, r) {
    // ä»¥nums[l] ä½œä¸ºåŸºå‡†æ•°
    let i = l, j = r;
    while(i < j) {
        while(i < j && nums[j] >= nums[left]) j--;// ä»å³å‘å·¦æ‰¾é¦–ä¸ªå°äºåŸºå‡†æ•°çš„å…ƒç´ 
        while(i < j && nums[i] <= nums[left]) i++;// ä»å·¦å‘å³æ‰¾é¦–ä¸ªå¤§äºåŸºå‡†æ•°çš„å…ƒç´ 

        swap(nums, i, j);// äº¤æ¢è¿™ä¸¤ä¸ªå…ƒç´ 
    }

    swap(nums, i, left);// å°†åŸºå‡†æ•°äº¤æ¢è‡³ä¸¤å­æ•°ç»„çš„åˆ†ç•Œçº¿
    return i;// è¿”å›åŸºå‡†æ•°çš„ç´¢å¼•
}
function quickSort(arr, l = 0, r) {
    r = r || arr.length - 1;
   if(l >= r) return;
   const pivot = divide(arr, l, r);
   quickSort(arr, l, pivot - 1);
   quickSort(arr, pivot + 1, r);
}
```
#### 5.å‡½æ•°æŸ¯é‡ŒåŒ–
```js
function curry(fn) {
    return function curried(...args) {
        if(args.length < fn.length) {
            return function (...newArgs) {
                return curried.apply(this, args.concat(newArgs));
            }
        } 
        return fn.apply(this, args)
    }
}
```
#### 6.ç‰ˆæœ¬å·æ¯”å¤§å°
```js
function compareVersion(arr) {
    return arr.sort((a, b) => {
        const arrA = a.split('.');
        const arrB = b.split('.');
        const maxLen = Math.max(arrA.length, arrB.length);

        for(let i = 0; i < maxLen; i++) {
            const curA = Number(arrA[i]) || 0;
            const curB = Number(arrB[i]) || 0;

            if(curA > curB) {
                return 1;
            } else if(curA < curB) {
                return -1;
            }
        }
        return 0;
    })
}
```
#### 7.å­—ç¬¦ä¸²ä¸­çš„ç¬¬ä¸€ä¸ªå”¯ä¸€å­—ç¬¦ 387

ç¤ºä¾‹ 1ï¼š

è¾“å…¥: s = "leetcode"
è¾“å‡º: 0
ç¤ºä¾‹ 2:

è¾“å…¥: s = "loveleetcode"
è¾“å‡º: 2
ç¤ºä¾‹ 3:

è¾“å…¥: s = "aabb"
è¾“å‡º: -1
 

æç¤º:

1 <= s.length <= 105
s åªåŒ…å«å°å†™å­—æ¯

```js
/**
 * @param {string} s
 * @return {number}
 */
var firstUniqChar = function(s) {
    let res = -1;
    const map = new Map();

    for(let i = 0; i < s.length; i++) {
        const cur = s[i];
        if(!map.has(cur)) {
            map.set(cur, [i])
        } else {
            const temp = map.get(cur);
            map.set(cur, temp.concat(i))
        }
    }
    for (const [key, value] of map) {
        if(value.length == 1) {
            res = value[0];
            break;
        }
    }

    return res;
};
console.log(firstUniqChar('loveleetcode'))
```
#### 8.æœ€é•¿å…¬å…±å‰ç¼€ 14
ç¤ºä¾‹ 1ï¼š

è¾“å…¥ï¼šstrs = ["flower","flow","flight"]
è¾“å‡ºï¼š"fl"
ç¤ºä¾‹ 2ï¼š

è¾“å…¥ï¼šstrs = ["dog","racecar","car"]
è¾“å‡ºï¼š""
è§£é‡Šï¼šè¾“å…¥ä¸å­˜åœ¨å…¬å…±å‰ç¼€ã€‚

```js
var longestCommonPrefix = function(strs) {
    if(strs.length == 0) return '';

    let comStr = strs[0];

    for(let i = 1; i < strs.length; i++) {
        for(let j = 0; j < comStr.length; j++) {
            if(strs[i][j] != comStr[j]) {
                comStr = comStr.slice(0, j)
            }
        }
    }
    return comStr;
};

console.log(longestCommonPrefix(["flower","flow","flight"]))
```